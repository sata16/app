{% extends "base.html" %}
{% block title %}–ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä—ã{% endblock %}

{% block content %}

<h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞–º–∏</h1>

<div class="clients-filter-card">
  <form method="GET" action="{{ url_for('workspace.clients') }}">

    <input type="text" name="q" class="input"
           placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É..."
           value="{{ request.args.get('q','') }}">

    <select name="sort" class="input">
      <option value="asc"  {% if request.args.get('sort')=='asc' %}selected{% endif %}>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ê ‚Üí –Ø</option>
      <option value="desc" {% if request.args.get('sort')=='desc' %}selected{% endif %}>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –Ø ‚Üí –ê</option>
    </select>

    <button class="btn-small green" type="submit">üîç –ù–∞–π—Ç–∏</button>
  </form>
</div>

<div class="clients-actions-top">
  <a href="{{ url_for('workspace.add_client') }}" class="btn-small green">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞</a>
  <a href="{{ url_for('workspace.view') }}" class="btn-small gray">‚Üê –ù–∞–∑–∞–¥</a>
</div>

<table class="clients-table">
  <thead>
    <tr>
      <th>–§–ò–û</th>
      <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
      <th>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</th>
      <th class="text-right">–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
  </thead>

  <tbody>
    {% for c in clients %}
    <tr>
      <td>{{ c.name }}</td>
      <td>{{ c.phone or '‚Äî' }}</td>
      <td>{{ c.notes or '‚Äî' }}</td>

      <td class="actions-cell">
        <div class="actions">
          <a href="{{ url_for('workspace.edit_client', client_id=c.client_id) }}"
             class="btn-mini green">‚úè</a>

          <form method="POST"
                action="{{ url_for('workspace.delete_client', client_id=c.client_id) }}"
                onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞?')">
            <button type="submit" class="btn-mini red">üóë</button>
          </form>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}